(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2647ce2b"],{"16e7":function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return f}),n.d(t,"h",function(){return p}),n.d(t,"i",function(){return d}),n.d(t,"f",function(){return v});n("386d");var r=n("bc3a"),a=n.n(r),o=n("da71"),i=function(e){return a.a.get("".concat(o["a"],"/groups/13/projects/?private_token=RfRyfGXCnwJF62boNdKg&order_by=updated_at"),{params:e})},c=function(e){return a.a.get("".concat(o["a"],"/projects/").concat(e.projectId,"/repository/branches/?private_token=RfRyfGXCnwJF62boNdKg&per_page=50"),{params:e})},s=function(e){return a.a.post("".concat(o["a"],"/projects/").concat(e.projectId,"/merge_requests/?private_token=RfRyfGXCnwJF62boNdKg"),e)},u=function(e){return a.a.put("".concat(o["a"],"/projects/").concat(e.projectId,"/merge_requests/").concat(e.mrId,"/merge/?private_token=RfRyfGXCnwJF62boNdKg"),e)},l=function(e){return a.a.put("".concat(o["a"],"/projects/").concat(e.projectId,"/merge_requests/").concat(e.mrId,"/?private_token=RfRyfGXCnwJF62boNdKg&state_event=close"),e)},f=function(e){return a.a.post("".concat(o["a"],"/projects/").concat(e.projectId,"/repository/tags/?private_token=RfRyfGXCnwJF62boNdKg"),e)},p=function(e){return a.a.get("".concat(o["a"],"/projects/").concat(e.projectId,"/repository/tags/?private_token=RfRyfGXCnwJF62boNdKg"))},d=function(e){return a.a.delete("".concat(o["a"],"/projects/").concat(e.projectId,"/repository/tags/").concat(e.tagName,"?private_token=sA1cAMxP7rYqosRz7DcG"),{})},v=function(e){return a.a.get("".concat(o["a"],"/projects/").concat(e.projectId,"/merge_requests?search=").concat(e.search,"&state=opened&private_token=RfRyfGXCnwJF62boNdKg"))}},"28a5":function(e,t,n){"use strict";var r=n("aae3"),a=n("cb7c"),o=n("ebd6"),i=n("0390"),c=n("9def"),s=n("5f1b"),u=n("520a"),l=Math.min,f=[].push,p="split",d="length",v="lastIndex",h=!!function(){try{return new RegExp("x","y")}catch(e){}}();n("214f")("split",2,function(e,t,n,m){var g=n;return"c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[d]||2!="ab"[p](/(?:ab)*/)[d]||4!="."[p](/(.?)(.?)/)[d]||"."[p](/()()/)[d]>1||""[p](/.?/)[d]?g=function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(a,e,t);var o,i,c,s=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,h=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,l+"g");while(o=u.call(m,a)){if(i=m[v],i>p&&(s.push(a.slice(p,o.index)),o[d]>1&&o.index<a[d]&&f.apply(s,o.slice(1)),c=o[0][d],p=i,s[d]>=h))break;m[v]===o.index&&m[v]++}return p===a[d]?!c&&m.test("")||s.push(""):s.push(a.slice(p)),s[d]>h?s.slice(0,h):s}:"0"[p](void 0,0)[d]&&(g=function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}),[function(n,r){var a=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,r):g.call(String(a),n,r)},function(e,t){var r=m(g,e,this,t,g!==n);if(r.done)return r.value;var u=a(e),f=String(this),p=o(u,RegExp),d=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),b=new p(h?u:"^(?:"+u.source+")",v),x=void 0===t?4294967295:t>>>0;if(0===x)return[];if(0===f.length)return null===s(b,f)?[f]:[];var w=0,j=0,y=[];while(j<f.length){b.lastIndex=h?j:0;var _,R=s(b,h?f:f.slice(j));if(null===R||(_=l(c(b.lastIndex+(h?0:j)),f.length))===w)j=i(f,j,d);else{if(y.push(f.slice(w,j)),y.length===x)return y;for(var k=1;k<=R.length-1;k++)if(y.push(R[k]),y.length===x)return y;j=w=_}}return y.push(f.slice(w)),y}]})},3055:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form-wrap"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"当前版本号"}},[n("span",[e._v(e._s(e.maxVersion))])]),n("el-form-item",{attrs:{label:"版本大小",prop:"versionScale"}},[n("el-radio",{attrs:{label:0},model:{value:e.form.versionScale,callback:function(t){e.$set(e.form,"versionScale",t)},expression:"form.versionScale"}},[e._v("主版本号")]),n("el-radio",{attrs:{label:1},model:{value:e.form.versionScale,callback:function(t){e.$set(e.form,"versionScale",t)},expression:"form.versionScale"}},[e._v("次版本号")]),n("el-radio",{attrs:{label:2},model:{value:e.form.versionScale,callback:function(t){e.$set(e.form,"versionScale",t)},expression:"form.versionScale"}},[e._v("修订号")])],1),n("el-form-item",{attrs:{label:"下个版本号"}},[n("span",[e._v(e._s(e.nextVersion))])])],1)],1)])},a=[];function o(e){if(Array.isArray(e))return e}function i(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){return o(e)||i(e,t)||c()}n("ac6a"),n("7f7f"),n("96cf");var u=n("1da1"),l=(n("28a5"),n("16e7")),f={name:"publish",data:function(){return{form:{versionScale:""},projectsOptions:[],versionArr:[],maxVersion:""}},computed:{nextVersion:function(){var e=this.maxVersion.split(".");if(""!==this.form.versionScale){e[this.form.versionScale]=1*e[this.form.versionScale]+1;for(var t=1*this.form.versionScale+1;t<e.length;t++)e[t]=0;return e.join(".")}return""}},methods:{getProjects:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["g"])();case 2:t=e.sent,n=t.data,this.projectsOptions=n.map(function(e){return{label:e.name,value:e.id}});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getBranchs:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["e"])({projectId:t});case 2:n=e.sent,r=n.data,this.branchs=r,this.branchsOptions=r.filter(function(e){return-1!==e.name.indexOf("feature")}).map(function(e){var t=e.name.split("_");return t.length<2?null:{label:t[1],value:e.name}});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getAllVersion:function(){var e=this;this.projectsOptions.forEach(function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(n){var r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])({projectId:n.value,search:"feature"});case 2:r=t.sent,a=r.data,a.forEach(function(t){var n=t.name,r=n.split("_");if(r.length>=2&&!/[^0-9\.]/.test(r[1]))if(e.versionArr.push(r[1]),""===e.maxVersion)e.maxVersion=r[1];else{var a=e.maxVersion.split("."),o=s(a,4),i=o[0],c=o[1],u=o[2],l=o[3],f=r[1].split("."),p=s(f,4),d=p[0],v=p[1],h=p[2],m=p[3];1*i<1*d?e.maxVersion=r[1]:1*i===1*d&&(1*c<1*v?e.maxVersion=r[1]:1*c===1*v&&(1*u<1*h?e.maxVersion=r[1]:1*u===1*h&&1*l<1*m&&(e.maxVersion=r[1])))}});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}},mounted:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getProjects();case 2:this.getAllVersion();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},p=f,d=(n("e135"),n("2877")),v=Object(d["a"])(p,r,a,!1,null,"46a22956",null);v.options.__file="Version.vue";t["default"]=v.exports},"386d":function(e,t,n){"use strict";var r=n("cb7c"),a=n("83a1"),o=n("5f1b");n("214f")("search",1,function(e,t,n,i){return[function(n){var r=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=i(n,e,this);if(t.done)return t.value;var c=r(e),s=String(this),u=c.lastIndex;a(u,0)||(c.lastIndex=0);var l=o(c,s);return a(c.lastIndex,u)||(c.lastIndex=u),null===l?-1:l.index}]})},"7f7f":function(e,t,n){var r=n("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in a||n("9e1e")&&r(a,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"9bb0":function(e,t,n){},e135:function(e,t,n){"use strict";var r=n("9bb0"),a=n.n(r);a.a}}]);
//# sourceMappingURL=chunk-2647ce2b.5a27bd00.js.map